# Test Admin User Creation

## Bước 1: Xóa admin cũ trong database

```sql
DELETE FROM users WHERE username = 'admin';
```

## Bước 2: Tạo admin mới qua backend API

Backend sẽ tự động hash password đúng cách.

### Cách 1: Sử dụng SQL với password đã hash từ backend

Vì không thể gọi API tạo user (cần ADMIN role), ta sẽ:
1. Tạo một admin tạm thời trong database
2. Login với admin đó
3. Dùng admin đó để tạo admin chính thức qua API

### Cách 2: Insert trực tiếp với password hash

Sử dụng password hash được tạo bởi BCryptPasswordEncoder của Spring Security.

## Test Script

```bash
# 1. Xóa admin cũ
docker exec -it lms-postgres psql -U lms -d lms -c "DELETE FROM users WHERE username = 'admin';"

# 2. Tạo admin mới với password: Admin@123
# Hash này được tạo bởi BCryptPasswordEncoder
docker exec -it lms-postgres psql -U lms -d lms -c "
INSERT INTO users (id, username, email, password, full_name, role, enabled, created_at, updated_at)
VALUES (
    gen_random_uuid(),
    'admin',
    'admin@lms.com',
    '\$2a\$10\$dXJ3SW6G7P2lh8RBfCWzU.ZGgZkGhJ4xKGt7weDnbROHEiKw4Tway',
    'System Administrator',
    'ADMIN',
    true,
    NOW(),
    NOW()
);
"

# 3. Test login
curl -X POST http://localhost:8088/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"Admin@123"}'
```

## Password Hashes (Generated by BCryptPasswordEncoder)

- `admin123` → `$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhCu`
- `Admin@123` → `$2a$10$dXJ3SW6G7P2lh8RBfCWzU.ZGgZkGhJ4xKGt7weDnbROHEiKw4Tway`
- `password123` → `$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2uheWG/igi2`

Note: Mỗi lần hash sẽ tạo ra hash khác nhau (do salt), nhưng tất cả đều verify được với password gốc.
